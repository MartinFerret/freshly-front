<app-order-dialog [order]="selectedOrder" [visible]="visible" />
<div class="card-wrapper">
  @for (order of orders; track order.id) {
    <div class="card">
      <div class="badge state--{{ order.state }}">
        @if (order.state === 'paid') {
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <g clip-path="url(#clip0_15305_40701)">
              <path d="M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11Z" stroke="#008000" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M3.75 6L5.25 7.5L8.25 4.5" stroke="#008000" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            <defs>
              <clipPath id="clip0_15305_40701">
                <rect width="12" height="12" fill="white"/>
              </clipPath>
            </defs>
          </svg>
        } @else {
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
            <g clip-path="url(#clip0_8393_7849)">
              <path d="M6 1.125V2.375M6 9V11M2.875 6H1.125M10.625 6H9.875M9.22855 9.22855L8.875 8.875M9.33211 2.70789L8.625 3.415M2.46079 9.53921L3.875 8.125M2.56434 2.60434L3.625 3.665" stroke="#C75300" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"/>
            </g>
            <defs>
              <clipPath id="clip0_8393_7849">
                <rect width="12" height="12" fill="white"/>
              </clipPath>
            </defs>
          </svg>

        }
        <p>{{ order.state | titlecase}}</p>
      </div>
      <h3>Order from the {{ order.date | date: 'dd/MM/yyyy' }} at {{ order.date | date: 'HH:mm' }}</h3>
      <div class="detail cursor-pointer">
        <p (click)="showOrderDetails(order)">View details</p>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M3.3335 10H16.6668M16.6668 10L11.6668 5M16.6668 10L11.6668 15" stroke="#9B0058" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="order-infos">
        <div class="order-number">
          <p>Order number #00{{ order.id }}</p>
        </div>
        <div>|</div>
        <div class="total-products">
          {{ order.product.length }} {{ order.product.length < 2 ? 'product' : 'products' }}
        </div>
      </div>
      <div class="price">
        <p>{{ order.totalPrice | currency: 'EUR' }}</p>
      </div>
      <div class="buttons">
        <p-button [label]="'Update Status'" [icon]="'pi pi-sync'" (click)="confirmUpdate(order)" />
        <p-button [outlined]="true" [icon]="'pi pi-times'" [label]="'Cancel Order'" (click)="deleteConfirm(order.id)" />
      </div>
    </div>
  }
</div>
